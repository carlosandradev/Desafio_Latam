# üíª 6. Backend con Node JS y Express

## üöÄ 6.1 Introducci√≥n a Node

## üìö 6.1.1 Clase: Introducci√≥n a Node

## üìö 6.1.2 Auto: Guia de Estudio 1 - Introduccion a Node

## üéØ Objetivo General
- Crear una alplicacion en Node JS que registre y lea informacion en formato JSON.

<br>  

## üóÇÔ∏è Objetivos de la Guia
1. Ejectutar scripts con Node JS desde la terminal
2. Crear archivos usando el modulo File System (fs)
3. Leer archivos con el modulo File System (fs)
4. Importar y exportar modulos en Node JS

<br>


## üìë Tabla de Contenidos

1. Introduccion a Node JS
2. Modulo File System
3. JSON.stringify()
4. Importar y Exportar modulos.

<br>

## ‚ùì Por que Node JS?

- Node Js es un entorno de ejecucion que nos permite correr codigo JavaScript fuera del navegador es decir en el lado del servidor.


- Gracias a esto, con Node JS podemos:
  - Crear aplicaciones backend.
  - Leer, crear, editar y eliminar archivos del sistema.
  - Conectarnos a bases de datos.
  - Crear APIs y servidores.
  - Automatizar tareas de desarrollo.
  - Todo usando JavaScript.

<br>

## üì¶ Node y NPM

-  Cuando instalamos Node JS tambien se instala automaticamente NPM (Node Package Manager).

- NPM es el gestor de paquetes mas popular de JavaScript y nos permite:
  - Instalar paquetes o librerias desarrolladas por la comunidad
  - Administrar las dependencias de nuestros proyectos
  - Compartir y publicar nuestros propios paquetes

<br>

## üîç Revisando la Instalacion

- Para comprobar si tenemos Node y NPM instalados correctamente, podemos usar los siguientes comandos en la terminal

- Verificar version de Node JS
```
node --version
```
- Verificar version de NPM
```
npm --version
```
- Si ambos comandos retornan una version, significa que Node JS y NPM estan instalados correctamente en tu maquina

<br>

## ‚ö†Ô∏è Importante

-  Si la terminal no reconoce los comandos, es probable que la instalacion no se haya realizado correctamente, o que debas cerrar y abrir nuevamente la terminal para actualizar la configuracion.

<br>

## üëã Hola Mundo desde Node JS

- Para realizar nuestro primer ejercicio en Node JS, vamos a crear un archivo que imprima un mensaje e la terminal.

- Pasos
  - Crea una carpeta en tu escritorio o donde prefieras para guardar tu proyecto
  - Abre la carpeta en Visual Studio Code
  - Dentro de la carpeta, crea un archivo llamado index.js
  - Escribe el siguiente codigo dentro del archivo
```js
console.log('Hola Node Js');
```
  -Abre la terminal integrada de Visual Studio Code
  - Ubicate en la carpeta donde creaste el archivo
  - Ejecuta el siguiente comando en la terminal
```
node index.js
```
- Si todo esta bien, la terminal mostrara
```
Hola Node Js
```

<br>

## Manos a la Obra: Fecha por consola

- Despues de haber ejecutado nuestro primer Hola Mundo, vamos a realizar un ejercicio sencillo para entender como Node.js ejecuta codigo JavaScript desde la terminal

- El objetivo es mostrar en consola la fecha actual

- Pasos
  - Crea un archivo llamado fecha.js dentro de la misma carpeta donde trabajaste tu "Hola Mundo"
  - Escribe el siguiente codigo dentro de fecha.js
```js
const fecha = new Date();
console.log(fecha);
```
  - Abre la terminal y ubicate en la carpeta donde esta el archivo
  - Ejecuta el siguiente comando
```
node fecha.js
```
  - La terminal te mostrara algo similar a esto
```
2025-07-24T09:15:30.000Z
```

<br>

## Crecion de Archivos

- Para crear un archivo desde Node JS utilizamos el modulo nativo llamado File System (fs). Este modulo viene incluido en Node JS y nos permite realizar acciones como:
  - Leer archivos
  - Crear archivos
  - Editar archivos
  - Eliminar archivos

- Esto es un ejemplo escribiendo un nuevo script ```index.js``` que tenga como objetivo crear un archivo de texto usando el metodo ```writeFileSync```
```js
const fs = require(' fs ')
const tareas =
  1. Ir al gimnasio
  2. Buscar al nino al colegio
  3. Pagar los gastos comunes

fs.writeFileSync(' tareas.txt ', tareas)
```
- Ejecuta este codigo y veras que ha aparecido un nuevo archivo de nombre tareas.txt, abrelo y encontraras las tareas declaradas en el script anterior.

```
tareas.txt
  1. Ir al gimnasio
  2. Buscar al nino al colegio
  3. Pagar los gastos comunes
```

- Para entender mejor como sucedio lo anterior, dividamos el codigo por partes:

  1. Importamos el modulo File System usando el metodo require()
  ```const fs = require('fs')```
  2. Preparamos el contenido del archivo a crear
  ```js 
    const tareas =
      1. Ir al gimnasio
      2. Buscar al nino al colegio
      3. Pagar los gastos comunes
  ```
  3. Ejecutamos el metodo writeFileSync de la instancia de FileSystem
  ```js
    fs.writeFileSync('tareas.txt', tareas)
  ```

- Como resultado se creara un archivo llamado ```tareas.txt``` cuyo contenido es de tipo **string**.

- Ahora procederemos a crear un nuevo archivo de tareas, pero ahora usando un arreglo de objetos como contenido

- Para esto utiliza este nuevo script
```js
const fs = require('fs')

const tareas = [
  { text: 'Ir al gimnasio' },
  { text: 'Buscar al nino al colegio' },
  { text: 'Pagar los gastos comunes' },
]

fs.writeFileSync('tareas.json', JSON.stringify(tareas) )
```

- El metodo JSON.stringify() convertira a formato JSON cualquier arreglo u objeto que se le asigne como argumento.

- Ahora al ejecutar el script anterior veras que se crea un nuevo archivo de nombre tareas.json que contiene el arreglo de objetos de las tareas

```json
[
  { "text": "Ir al gimnasio" },
  { "text": "Buscar al nino al colegio" },
  { "text": "Pagar los gastos comunes" }
]
```

- El JSON.stringify() nos permite convertir un arreglo o un objeto en un Sring en formato JSON, de esta manera podremos almacenarlos en un archivo o compartirlo con otras aplicaciones.

<br>

## Metodo WriteFileSync.doc

- vamos a crear un nuevo archivo usando la extension .doc para abrirlo con Word o Google Docs o cualquier otro editor de texto:

  - Crea una constante con un String "Node es genial"
  - Usa el metodo *writeFileSync* para crear un archivo de nombre test.doc usando la constante creada como contenido  
    - En esta ocacion no es necesario usar el JSON.stringify() ya que estamos directamente usando un string
  - Ejecuta el script por la terminal
  - Usa word o docs de Google Drive o cualquier otro editor para abrir el archivo creado

<br>

## Metodo WriteFileSync.xsl

- Vamos a crear un nuevo archivo usando la extension .xsl para abrirlo con google sheets o Excel:
  
  - Crea una constante con un string "Node Js\t Express Js"
  - Usa el metodo WriteFileSync para crear un archivo de nombre test.xls usando la constante creada como contenido
  - Ejecuta el script en la terminal
  - Usa Excel o Google Sheets para abrir el archivo creado

<br>

## Autos.json

- Vamos a ejecutar un script que cree un archivo autos.json con el metodo *writeFileSync* y el siguiente arreglo de objetos:

```json
const autos = [
  {
    marca: 'Suzuki',
    modelo: 'Kicks',
  },
  {
    marca: 'Toyota',
    modelo: 'Corola',
  },
  {
    marca: 'GAC',
    modelo: 'GS4',
  },
]
```
<br>

## Sobreescritura de archivos

- Cuando queramos actualizar el contenido de un archivo, utilizaremos nuevamente el *writeFilesSync* para sobreescribirlo con los nuevos datos.

- Probemos sobreescribiendo el archivo tareas.json agregando una nueva tarea

```json
const tareas = [
  {text: 'Ir al Gimnasio'},
  {text: 'Ir por los nios al colegio'},
  {text: 'Pagar los gastos comunes'},
  {text: 'Cargar becina'},
  {text: 'Comprar play 5'}
]

fs.writeFileSync("tareas.json", JSON.stringify(tareas))
```

<br>

## Autos.Json

- Ejecuta un script que sobreescriba el archivo autos.json con el metodo writeFileSync para agregar un auto mas al arreglo de objetos:

```json
const autos = [
  {
    marca: 'Suzuki',
    modelo: 'Kicks',
  },
  {
    marca: 'Toyota',
    modelo: 'Corola',
  },
  {
    marca: 'GAC',
    modelo: 'GS4',
  },
  {
    marca: 'Chevrolet',
    modelo: 'Tracker',
  }
]

fs.writeFileSync("autos.json", JSON.stringify(autos));
```

<br>

## Lectura de archivos

- Asi como podemos crear archivos tambien podemos leerlos con el metodo writeFileSync

- Este metodo tiene la siguiente anatomia

```js
fs.readFileSync( <nombre del archivo>, <codificacion del contenido> )
```

- Por defecto siempre especificaremos como codificacion 'UTF8', puesto que tiene los caracteres de nuestro idioma

- Al ejecutar este metodo, recibiremos como retorno el contenido del archivo

- Veamos un ejemplo leyendo uno de los archivos que creamos previamente, el archivo tareas.json

- Vamos a crear un nuevo script que contenga el siguiente codigo

```js
const fs = require('fs')

const tareas = fs.readFileSync('tareas.json', 'utf8')

console.log(tareas)
```

- Este codigo nos permite mostrar por consola el contenido del archivo tareas.json

- Ejecutando el script anterior obtendremos el siguiente resultado en consola

```js
carl_andrade13@carlos-macbook-pro 6.1.2_auto_guiaEstudiosIntroANode % node script.js
[
  { text: 'Ir al Gimnasio' },
  { text: 'Ir por los nios al colegio' },
  { text: 'Pagar los gastos comunes' },
  { text: 'Cargar becina' },
  { text: 'Comprar play 5' }
]
```
<br>

## Manos a la obra - readFileSync

- Crea un documento HTML con una estructura basica y luego escribe un script que lea su contenido usando el metodo readFileSync

```html
carl_andrade13@carlos-macbook-pro 6.1.2_auto_guiaEstudiosIntroANode % node leerHtml.js
<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>readFileSync</title>
</head>
<body>
  <h1>Anita la huerfanita</h1>
</body>
</html>
```

<br>

## Lectura y manipulacion de archivos JSON

- JSON o JavaScript object notation es un formato que se guarda como texto plano, al leer uno de estos archivos desde JavaScript o desde cualquier otro lenguaje traeremos el dato como un string el cual posteriormente transformaremos

- Pero que pasa si no los transformamos?

```js
tareas.forEach( (tarea) =>{
  console.log(tarea)
})
```
- Recibiremos este mensaje por la terminal

```js
tareas.forEach((tarea) => {

TypeError: tareas.forEach is not a function
```
- Lo cual sucede porque tareas es un String y este tipo de dato no cuenta con el metodo forEach como arreglos.

- Para ello podemos usar el metodo ```JSON.parse()``` que nos permite convertir un String de Formato JSON a un arreglo u objeto, a la inverda del metodo JSON.stringify().

- Para correr correctamente el arreglo de tareas en formato JSON entonces podemos hacer lo siguiente

```js
JSON.parse(tareas).ForEach((tarea) => {
  console.log(tarea)
})
```

- Al ejecutarlo podemos ver que la consola nos mostrara correctamente cada una de las tareas:

```
$ node index.js
  {text: 'Ir al Gimnasio'},
  {text: 'Ir por los nios al colegio'},
  {text: 'Pagar los gastos comunes'},
  {text: 'Cargar becina'},
  {text: 'Comprar play 5'}
```